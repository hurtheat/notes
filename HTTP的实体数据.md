### HTTP的实体数据

#### 一、实体数据的内容

##### 	1.实体数据指的是：

​			实体数据指的是通过HTTP协议传输的数据，具体一点就是HTTP报文中的"header+body"中的body

#### 二、实体数据的编码和类型

##### 	1.为什么需要数据的编码和类型

​		众所周知，HTTP协议是基于TCP/IP协议的应用层协议，也就是使用使用数据的（好比接收或寄送的人）。TCP和UDP都传输层协议（好比运输快递的车），它们不必知晓数据的类型。

​		想象一个场景：服务器返回给客户端的数据，通过TCP传输给客户端，客户端收到这些数据后，要对数据进行解析的时候，由于不知道这些数据是什么类型，所以客户端就要去“猜”这些数据是什么，好像可以，但是当传输的数据多种多样时，就增加了时间和性能成本，还有可能出现解析不了的状况。

​		但是如果客户端能够知道数据的类型（也就是数据大概的格式，通过一套服务器和客户端规范规定好），那么客户端就可以按照固定的格式去解析数据，应用数据的速度和能力自然就提高了，同样，客户端传过给服务端的数据，服务端也能更好解析了。

​		上诉过程中的规定数据类型这一过程可以理解为 **内容协商**

##### 	2.规范数据的类型的协议：MIME(多类型互联网邮件扩展)

​		MIME把数据分为八大类，用形式为**type/subType**的方式表示数据类型，所以很自然的就可以将这个表示方式放在HTTP的头字段里（请求头和相应头），用于表示请求中和响应中携带body的数据类型。

##### 	3.HTTP中常用的数据类型

- application:表示由应用这些数据的应用解析来解析，如在web应用中由相应的js解析的json数据表示为application/json,还有其他诸如application/pdf;application/javascript,如果实在不知道数据类型，获取不公开的，就用application/octet-stream
- text:表示文本格式的可读数据，常用的用text/html表示超文本数据，text/plain表示纯文本数据，text/css表示样式表。
- image:表示图像文件，如image/jpg等
- Audio/video:表示音频和视频文件



##### 	4.数据类型在HTTP中的体现

​		图片表示

​		**Accept**标记客户端可以理解的MIME Type,可以用；隔开，表示多个

​		**Content-Type**则表示服务器在响应报文里给的数据的类型

##### 	5.数据的压缩算法

​		为了节约带宽和提高传输效率，肯定要对数据进行压缩，所以也需要服务端和客户端协商好压缩的算法，方便压缩和解压缩数据。

​		常用的压缩算法：**gzip, deflate,br**	,在HTTP中用头字段**Encoding-type**表示，如一下报文：

##### 	6.压缩算法在HTTP中的体现

​		**Accept-Encoding**表示客户端支持的压缩算法

​		**Content-Encoding**表示服务器选择的压缩算法

​		以上两个字段不是必须的，没有则表示不支持压缩，或者没有压缩数据

##### 	7.常用的语言类型和编码

​		因为存在过种语言的情况，同样也需要协商语言的规范，即服务器和客户端规范语言的规范，客户端需要告诉服务器需要何种语言的数据，服务器告知服务端返回的数据用的是何种语言。

​		当然有语言又存在编码问题，协商用何种编码解析。常用的编码有**Unicode**和**UTF-8**

##### 	8.数据语言和编码在HTTP中的体现

​		**Accept-Language**表示客户端支持的语言，可以有多个，用分号隔开

​		**Content-Language**表示服务器返回给客户端数据的语言

​		**Accept-Charest**表示客户端支持的字符编码

​		但是响应数据中并没有Content-charest的说法，都是放在Content-Type字段后面，用charest=utf-8表示，如：



#### 三、内容协商的质量值

​	客户端的Accept-字段同样可以合并在一起，如：

​	上面所说的数据的类型，语言，压缩算法，字符编码等都是客户端和服务器内容协商的依据，也就是觉得内容的长啥样的判断标准，通过这些标志决定用body中数据是什么内容，什么语言，用何种压缩算法等。但是这么多的标准，就应该有权重值，表示优先依据那种，这就是内容协商的质量值，在HTTP中用q=value表示，最大是1(默认值)，最小是0.01,0表示拒绝，示例如下：

#### 四、内容协商的结果

​	不同的服务器有不同的算法根据这些依据给出内容，是不透明的，所以服务器会给出一些信息显示依据哪些标准给出的内容，用**Vary**表示，示例如下：

​	

​	

