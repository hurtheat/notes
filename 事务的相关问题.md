###### 一、事务的概念

  **  事务是指一系列操作要不全部成功，要不全部失败，作为一个逻辑上整体**。

    举个例子，转账业务中,A给B转账，先从A账户扣钱，然后给B账户加钱，这连个操作必须一起完成或失败，如果在中间出现错误，A扣完钱，没有给B加钱，那么就会出现比较大的损失，数据库（这里以Mysql为例）就通过事务保证多个操作必须一起成功或一起失败（原子性），否则就会有**数据不一致**的情况。

###### 二、事务的四大特性（ACID）

- **原子性**：原子性指的事务中操作作为一个整体，要不都失败，要不都成功，不存在某些  成功，某些失败的情况。

- **一致性**：事务的最终目的就是保证数据的一致性。

- **隔离性**：多个事务并发的情况下，事务之间需要一定的数据的隔离，保证一致性。

- **持久性**：事务前后的数据都是要持久化在数据库的文件中（磁盘），数据不是临时，是          

        持久化的。 

    PS:**四大特性中，原子性，隔离性，持久性都是实现一致性的手段，也就是一致性才是事务解决的问题。**

###### 三、事务隔离性使用的场景

    首先需要明确的是：**一个事务存在的场景是没有隔离性可以讨论的**。**事务存在于多个并发事务之间的**。

###### 四、InnoDB存储引擎的四种隔离级别

- **读未提交**（READ UNCOMMITTED）: 一个事务可以读到其他没有提交事务的变更，同样自己如果还没提交，也会被其他事务读到自己的变更。

- **读已提交**（READ COMMITTED）: 一个事务可以读到其他已经提交事务的变更。

- **可重复读**（REPEATABLE READ）: 指一个事务开启后到提交，每次读到的相同条件的数据都是一样，即是数据是可重复读到的。同时未提交的事务也是不能被其他事务读到的。只有自己提交后，才能读到其他已经提交事务的变更。

- **串行化**（SERIALIZABLE）: 对于同一行记录，写会加写锁，读会加读锁。当时读写冲突时，后访问的事务必须等到前一个事务释放锁，拿到对应的锁才能操作数据，保证数据是拍着队（串行）操作数据。

###### 五、四大隔离级别存在的相关问题

- 脏读：脏读指定的是读到了脏数据，所谓的脏数据，就是未提交的数据，因为未提交的数据没有持久化到数据库中，随时可能存在回滚，这些数据可能不是正确的数据，也是破环的数据一致性的。**脏读读到未提交的数据，只有在未提交的隔离级别存在这个问题**

- 幻读：幻读指事务读到前一次读取不一样的数据，比如“select name form student where class = 1”事务刚开始读取一年级所有学生名字时，假设只有小美，但是别的事务添加了一个小明，那么下次这个事务再读，就读出小美和小明两个结果，向出现幻觉一样，这就是幻读。总结其实幻读是其他事务**新增或删除**操作，引起事务的读取出现不一样。

- 不可重复读：不可重复读，一个事务读取数据，第一次读取数据后，但是其他事务此时**修改**了这些数据，可能出现下一次同样条件读取，数据不一样了，就是在一个事务中，不能在同样条件下，不能每次都读到重复的数据。**不可重复读针对的是修改带来的问题**，这点是和幻读的区别。

###### 六、事务隔离的实现

###### 七、不建议使用长事务的原因及避免使用长事务


